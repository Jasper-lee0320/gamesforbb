<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jasper游戏二维码生成器</title>
    <style>
        body {
            background: linear-gradient(135deg, #667eea, #764ba2);
            font-family: Arial, sans-serif;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
            padding: 20px;
        }
        .container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            max-width: 500px;
            width: 100%;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        h1 {
            color: #333;
            margin-bottom: 20px;
        }
        .games {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }
        .game-btn {
            background: linear-gradient(45deg, #ff6b6b, #ffa500);
            color: white;
            border: none;
            padding: 20px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 14px;
            transition: transform 0.3s;
        }
        .game-btn:hover {
            transform: translateY(-3px);
        }
        #qrArea {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            min-height: 250px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        #qrArea img {
            max-width: 200px;
            border: 2px solid #667eea;
            border-radius: 10px;
            margin: 10px;
        }
        .buttons {
            margin: 20px 0;
        }
        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            margin: 5px;
            cursor: pointer;
        }
        textarea {
            width: 100%;
            height: 60px;
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎮 Jasper的游戏二维码</h1>
        <p style="color: #666;">选择游戏生成二维码，扫码即可在手机上玩！</p>
        
        <div class="games">
            <button class="game-btn" onclick="makeQR('plane')">
                🚀 飞机大战<br><small>触屏射击</small>
            </button>
            <button class="game-btn" onclick="makeQR('snake')">
                🐍 贪吃蛇<br><small>滑动控制</small>
            </button>
            <button class="game-btn" onclick="makeQR('puzzle')">
                🧩 数字拼图<br><small>点击移动</small>
            </button>
            <button class="game-btn" onclick="makeQR('github')">
                📂 GitHub仓库<br><small>查看源码</small>
            </button>
        </div>

        <div id="qrArea">
            <p>📱 选择游戏生成二维码</p>
        </div>

        <div>
            <textarea id="linkArea" placeholder="生成的链接会显示在这里..." readonly></textarea>
        </div>

        <div class="buttons">
            <button class="btn" onclick="copyLink()">📋 复制链接</button>
            <button class="btn" onclick="testGame()">🎮 测试游戏</button>
        </div>

        <div id="message" style="margin: 10px 0; display: none;"></div>
    </div>

    <script>
        let gameLink = '';

        function makeQR(type) {
            let url = '';
            let title = '';

            if (type === 'plane') {
                const game = 'data:text/html;charset=utf-8,%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3Cmeta%20charset%3D%22UTF-8%22%3E%3Ctitle%3EJasper%E9%A3%9E%E6%9C%BA%E5%A4%A7%E6%88%98%3C/title%3E%3Cstyle%3Ebody%7Bbackground%3A%23001%3Bfont-family%3AArial%3Boverflow%3Ahidden%3Bdisplay%3Aflex%3Bflex-direction%3Acolumn%3Balign-items%3Acenter%3Bheight%3A100vh%3Btouch-action%3Anone%7Dcanvas%7Bborder%3A2px%20solid%20%230ff%3Bbackground%3Alinear-gradient(to%20bottom%2C%23001%2C%23003)%3Btouch-action%3Anone%7D%23ui%7Bcolor%3A%230ff%3Bpadding%3A10px%3Btext-align%3Acenter%7D%3C/style%3E%3C/head%3E%3Cbody%3E%3Cdiv%20id%3D%22ui%22%3E%F0%9F%9A%80%20Jasper-lee0320%20%E7%9A%84%E9%A3%9E%E6%9C%BA%E5%A4%A7%E6%88%98%3Cbr%3E%E5%88%86%E6%95%B0%3A%20%3Cspan%20id%3D%22score%22%3E0%3C/span%3E%20%7C%20%E7%94%9F%E5%91%BD%3A%20%3Cspan%20id%3D%22lives%22%3E3%3C/span%3E%3C/div%3E%3Ccanvas%20id%3D%22game%22%20width%3D%22300%22%20height%3D%22400%22%3E%3C/canvas%3E%3Cdiv%20style%3D%22color%3A%230ff%3Bfont-size%3A12px%3Btext-align%3Acenter%22%3E%E8%A7%A6%E5%B1%8F%E6%8B%96%E5%8A%A8%E6%8E%A7%E5%88%B6%EF%BC%8C%E6%8A%AC%E8%B5%B7%E5%8F%91%E5%B0%84%3C/div%3E%3Cscript%3Econst%20c%3Ddocument.getElementById(%22game%22)%2Cctx%3Dc.getContext(%222d%22)%3Blet%20running%3D1%2Cscore%3D0%2Clives%3D3%2Cframe%3D0%3Bconst%20player%3D%7Bx%3A150%2Cy%3A350%2Cw%3A20%2Ch%3A30%7D%3Blet%20bullets%3D%5B%5D%2Cenemies%3D%5B%5D%3Bfunction%20draw()%7Bctx.clearRect(0%2C0%2Cc.width%2Cc.height)%3Bctx.fillStyle%3D%22%230ff%22%3Bctx.fillRect(player.x-10%2Cplayer.y-15%2Cplayer.w%2Cplayer.h)%3Bctx.fillStyle%3D%22%23ff0%22%3Bbullets.forEach(b%3D%3Ectx.fillRect(b.x%2Cb.y%2C3%2C8))%3Bctx.fillStyle%3D%22%23f44%22%3Benemies.forEach(e%3D%3Ectx.fillRect(e.x%2Ce.y%2Ce.w%2Ce.h))%3Bctx.fillStyle%3D%22%230ff%22%3Bctx.font%3D%2210px%20Arial%22%3Bctx.textAlign%3D%22center%22%3Bctx.fillText(%22Jasper%22%2Cplayer.x%2Cplayer.y%2B20)%7Dfunction%20update()%7Bbullets%3Dbullets.filter(b%3D%3E(b.y-%3D6%2Cb.y%3E0))%3Benemies%3Denemies.filter(e%3D%3E(e.y%2B%3De.speed%2Ce.y%3Cc.height))%3Bframe%2560%3D%3D%3D0%26%26enemies.push(%7Bx%3AMath.random()*(c.width-15)%2Cy%3A0%2Cw%3A15%2Ch%3A20%2Cspeed%3A2%2BMath.random()*2%7D)%3Bbullets.forEach((b%2Cbi)%3D%3E%7Benemies.forEach((e%2Cei)%3D%3E%7Bif(b.x%3Ee.x%26%26b.x%3Ce.x%2Be.w%26%26b.y%3Ee.y%26%26b.y%3Ce.y%2Be.h)%7Bbullets.splice(bi%2C1)%3Benemies.splice(ei%2C1)%3Bscore%2B%3D10%3Bdocument.getElementById(%22score%22).textContent%3Dscore%7D%7D)%7D)%3Benemies.forEach((e%2Cei)%3D%3E%7Bif(e.x%3Cplayer.x%2B10%26%26e.x%2Be.w%3Eplayer.x-10%26%26e.y%3Cplayer.y%2B15%26%26e.y%2Be.h%3Eplayer.y-15)%7Benemies.splice(ei%2C1)%3Blives--%3Bdocument.getElementById(%22lives%22).textContent%3Dlives%3Bif(lives%3C%3D0)%7Balert(%22%E6%B8%B8%E6%88%8F%E7%BB%93%E6%9D%9F!%20Jasper%E7%9A%84%E5%88%86%E6%95%B0%3A%20%22%2Bscore)%3Blocation.reload()%7D%7D%7D)%7Dfunction%20loop()%7Brunning%26%26(update()%2Cdraw()%2Cframe%2B%2B%2CrequestAnimationFrame(loop))%7Dlet%20touchX%3D0%2CtouchY%3D0%3Bc.addEventListener(%22touchstart%22%2Ce%3D%3E%7Be.preventDefault()%3Bconst%20t%3De.touches%5B0%5D%3BtouchX%3Dt.clientX%3BtouchY%3Dt.clientY%7D)%3Bc.addEventListener(%22touchmove%22%2Ce%3D%3E%7Be.preventDefault()%3Bconst%20t%3De.touches%5B0%5D%3Bplayer.x%2B%3D(t.clientX-touchX)*0.8%3Bplayer.y%2B%3D(t.clientY-touchY)*0.5%3Bplayer.x%3DMath.max(10%2CMath.min(c.width-10%2Cplayer.x))%3Bplayer.y%3DMath.max(15%2CMath.min(c.height-15%2Cplayer.y))%3BtouchX%3Dt.clientX%3BtouchY%3Dt.clientY%7D)%3Bc.addEventListener(%22touchend%22%2Ce%3D%3E%7Be.preventDefault()%3Bbullets.push(%7Bx%3Aplayer.x%2Cy%3Aplayer.y-15%7D)%7D)%3Bloop()%3C/script%3E%3C/body%3E%3C/html%3E';
                url = game;
                title = '🚀 飞机大战';
            } else if (type === 'snake') {
                const game = 'data:text/html;charset=utf-8,%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3Cmeta%20charset%3D%22UTF-8%22%3E%3Ctitle%3EJasper%E8%B4%AA%E5%90%83%E8%9B%87%3C/title%3E%3Cstyle%3Ebody%7Bbackground%3A%23000%3Bdisplay%3Aflex%3Bflex-direction%3Acolumn%3Balign-items%3Acenter%3Bjustify-content%3Acenter%3Bheight%3A100vh%3Bmargin%3A0%3Bfont-family%3AArial%3Btouch-action%3Anone%7Dcanvas%7Bborder%3A2px%20solid%20%230f0%3Btouch-action%3Anone%7D%23info%7Bcolor%3A%230f0%3Btext-align%3Acenter%3Bmargin%3A10px%3Bfont-size%3A18px%7D%3C/style%3E%3C/head%3E%3Cbody%3E%3Cdiv%20id%3D%22info%22%3E%F0%9F%90%8D%20Jasper-lee0320%20%E7%9A%84%E8%B4%AA%E5%90%83%E8%9B%87%3Cbr%3E%E5%88%86%E6%95%B0%3A%20%3Cspan%20id%3D%22score%22%3E0%3C/span%3E%3C/div%3E%3Ccanvas%20id%3D%22game%22%20width%3D%22320%22%20height%3D%22320%22%3E%3C/canvas%3E%3Cdiv%20style%3D%22color%3A%23888%3Bfont-size%3A12px%3Btext-align%3Acenter%22%3E%E6%BB%91%E5%8A%A8%E5%B1%8F%E5%B9%95%E6%8E%A7%E5%88%B6%E6%96%B9%E5%90%91%3C/div%3E%3Cscript%3Econst%20canvas%3Ddocument.getElementById(%22game%22)%2Cctx%3Dcanvas.getContext(%222d%22)%2Cbox%3D20%3Blet%20snake%3D%5B%7Bx%3A8*box%2Cy%3A8*box%7D%5D%2Cdirection%3D%22%22%2Cfood%3D%7Bx%3AMath.floor(Math.random()*16)*box%2Cy%3AMath.floor(Math.random()*16)*box%7D%2Cscore%3D0%3Bfunction%20collision(head%2Carray)%7Breturn%20array.some(segment%3D%3Ehead.x%3D%3D%3Dsegment.x%26%26head.y%3D%3D%3Dsegment.y)%7Dfunction%20draw()%7Bctx.fillStyle%3D%22%23000%22%3Bctx.fillRect(0%2C0%2Ccanvas.width%2Ccanvas.height)%3Bsnake.forEach((segment%2Cindex)%3D%3E%7Bctx.fillStyle%3Dindex%3D%3D%3D0%3F%22%230f0%22%3A%22%23090%22%3Bctx.fillRect(segment.x%2Csegment.y%2Cbox%2Cbox)%7D)%3Bctx.fillStyle%3D%22%23f00%22%3Bctx.fillRect(food.x%2Cfood.y%2Cbox%2Cbox)%3Blet%20snakeX%3Dsnake%5B0%5D.x%2CsnakeY%3Dsnake%5B0%5D.y%3Bif(direction%3D%3D%3D%22LEFT%22)snakeX-%3Dbox%3Bif(direction%3D%3D%3D%22UP%22)snakeY-%3Dbox%3Bif(direction%3D%3D%3D%22RIGHT%22)snakeX%2B%3Dbox%3Bif(direction%3D%3D%3D%22DOWN%22)snakeY%2B%3Dbox%3Bif(snakeX%3D%3D%3Dfood.x%26%26snakeY%3D%3D%3Dfood.y)%7Bscore%2B%2B%3Bdocument.getElementById(%22score%22).textContent%3Dscore%3Bfood%3D%7Bx%3AMath.floor(Math.random()*16)*box%2Cy%3AMath.floor(Math.random()*16)*box%7D%7Delse%7Bsnake.pop()%7Dif(snakeX%3C0%7C%7CsnakeY%3C0%7C%7CsnakeX%3E%3Dcanvas.width%7C%7CsnakeY%3E%3Dcanvas.height%7C%7Ccollision(%7Bx%3AsnakeX%2Cy%3AsnakeY%7D%2Csnake))%7Balert(%22%E6%B8%B8%E6%88%8F%E7%BB%93%E6%9D%9F!%20Jasper%E7%9A%84%E5%88%86%E6%95%B0%3A%20%22%2Bscore)%3Blocation.reload()%3Breturn%7Dsnake.unshift(%7Bx%3AsnakeX%2Cy%3AsnakeY%7D)%7Dlet%20touchStartX%2CtouchStartY%3Bcanvas.addEventListener(%22touchstart%22%2Ce%3D%3E%7Be.preventDefault()%3Bconst%20touch%3De.touches%5B0%5D%3BtouchStartX%3Dtouch.clientX%3BtouchStartY%3Dtouch.clientY%7D)%3Bcanvas.addEventListener(%22touchend%22%2Ce%3D%3E%7Be.preventDefault()%3Bconst%20touch%3De.changedTouches%5B0%5D%3Bconst%20touchEndX%3Dtouch.clientX%2CtouchEndY%3Dtouch.clientY%2Cdx%3DtouchEndX-touchStartX%2Cdy%3DtouchEndY-touchStartY%3Bif(Math.abs(dx)%3EMath.abs(dy))%7Bif(dx%3E0%26%26direction!%3D%3D%22LEFT%22)direction%3D%22RIGHT%22%3Bif(dx%3C0%26%26direction!%3D%3D%22RIGHT%22)direction%3D%22LEFT%22%7Delse%7Bif(dy%3E0%26%26direction!%3D%3D%22UP%22)direction%3D%22DOWN%22%3Bif(dy%3C0%26%26direction!%3D%3D%22DOWN%22)direction%3D%22UP%22%7D%7D)%3BsetInterval(draw%2C150)%3C/script%3E%3C/body%3E%3C/html%3E';
                url = game;
                title = '🐍 贪吃蛇';
            } else if (type === 'puzzle') {
                const game = 'data:text/html;charset=utf-8,%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3Cmeta%20charset%3D%22UTF-8%22%3E%3Ctitle%3EJasper%E6%8B%BC%E5%9B%BE%3C/title%3E%3Cstyle%3Ebody%7Bbackground%3Alinear-gradient(45deg%2C%23667eea%2C%23764ba2)%3Bdisplay%3Aflex%3Bflex-direction%3Acolumn%3Balign-items%3Acenter%3Bpadding%3A20px%3Bfont-family%3AArial%3Bmin-height%3A100vh%7D%23game%7Bbackground%3A%23fff%3Bpadding%3A20px%3Bborder-radius%3A15px%3Btext-align%3Acenter%7D%23puzzle%7Bdisplay%3Agrid%3Bgrid-template-columns%3Arepeat(3%2C70px)%3Bgap%3A5px%3Bmargin%3A20px%200%3Bjustify-content%3Acenter%7D.tile%7Bwidth%3A70px%3Bheight%3A70px%3Bbackground%3A%23667eea%3Bcolor%3A%23fff%3Bdisplay%3Aflex%3Balign-items%3Acenter%3Bjustify-content%3Acenter%3Bfont-size%3A20px%3Bfont-weight%3Abold%3Bcursor%3Apointer%3Bborder-radius%3A8px%3Btransition%3Aall%200.3s%7D.tile%3Ahover%7Bbackground%3A%23764ba2%3Btransform%3Ascale(1.05)%7D.empty%7Bbackground%3Atransparent!important%3Bcursor%3Adefault!important%7D.empty%3Ahover%7Btransform%3Anone!important%7Dbutton%7Bbackground%3A%23fff%3Bcolor%3A%23667eea%3Bborder%3Anone%3Bpadding%3A12px%2020px%3Bborder-radius%3A25px%3Bcursor%3Apointer%3Bmargin%3A5px%7D%3C/style%3E%3C/head%3E%3Cbody%3E%3Cdiv%20style%3D%22color%3A%23fff%3Btext-align%3Acenter%3Bmargin-bottom%3A20px%22%3E%3Ch2%3E%F0%9F%A7%A9%20Jasper-lee0320%20%E7%9A%84%E6%8B%BC%E5%9B%BE%3C/h2%3E%3Cp%3E%E6%AD%A5%E6%95%B0%3A%20%3Cspan%20id%3D%22moves%22%3E0%3C/span%3E%3C/p%3E%3C/div%3E%3Cdiv%20id%3D%22game%22%3E%3Cdiv%20id%3D%22puzzle%22%3E%3C/div%3E%3Cbutton%20onclick%3D%22shuffle()%22%3E%E9%87%8D%E6%96%B0%E5%BC%80%E5%A7%8B%3C/button%3E%3C/div%3E%3Cscript%3Elet%20tiles%3D%5B1%2C2%2C3%2C4%2C5%2C6%2C7%2C8%2C0%5D%2Cmoves%3D0%3Bfunction%20createPuzzle()%7Bconst%20puzzle%3Ddocument.getElementById(%22puzzle%22)%3Bpuzzle.innerHTML%3D%22%22%3Btiles.forEach((tile%2Cindex)%3D%3E%7Bconst%20div%3Ddocument.createElement(%22div%22)%3Bdiv.className%3Dtile%3D%3D%3D0%3F%22tile%20empty%22%3A%22tile%22%3Bdiv.textContent%3Dtile%3D%3D%3D0%3F%22%22%3Atile%3Bdiv.onclick%3D()%3D%3EmoveTile(index)%3Bpuzzle.appendChild(div)%7D)%7Dfunction%20moveTile(index)%7Bconst%20emptyIndex%3Dtiles.indexOf(0)%2Crow%3DMath.floor(index/3)%2Ccol%3Dindex%253%2CemptyRow%3DMath.floor(emptyIndex/3)%2CemptyCol%3DemptyIndex%253%3Bif((Math.abs(row-emptyRow)%3D%3D%3D1%26%26col%3D%3D%3DemptyCol)%7C%7C(Math.abs(col-emptyCol)%3D%3D%3D1%26%26row%3D%3D%3DemptyRow))%7B%5Btiles%5Bindex%5D%2Ctiles%5BemptyIndex%5D%5D%3D%5Btiles%5BemptyIndex%5D%2Ctiles%5Bindex%5D%5D%3Bmoves%2B%2B%3Bdocument.getElementById(%22moves%22).textContent%3Dmoves%3BcreatePuzzle()%3Bif(JSON.stringify(tiles)%3D%3D%3D%22%5B1%2C2%2C3%2C4%2C5%2C6%2C7%2C8%2C0%5D%22)%7Balert(%22%F0%9F%8E%89%20%E6%81%AD%E5%96%9CJasper%E5%AE%8C%E6%88%90%E6%8B%BC%E5%9B%BE!%20%E6%AD%A5%E6%95%B0%3A%20%22%2Bmoves)%7D%7D%7Dfunction%20shuffle()%7Bfor(let%20i%3D0%3Bi%3C200%3Bi%2B%2B)%7Bconst%20validMoves%3D%5B%5D%2CemptyIndex%3Dtiles.indexOf(0)%2Crow%3DMath.floor(emptyIndex/3)%2Ccol%3DemptyIndex%253%3Bif(row%3E0)validMoves.push(emptyIndex-3)%3Bif(row%3C2)validMoves.push(emptyIndex%2B3)%3Bif(col%3E0)validMoves.push(emptyIndex-1)%3Bif(col%3C2)validMoves.push(emptyIndex%2B1)%3Bconst%20randomMove%3DvalidMoves%5BMath.floor(Math.random()*validMoves.length)%5D%3B%5Btiles%5BrandomMove%5D%2Ctiles%5BemptyIndex%5D%5D%3D%5Btiles%5BemptyIndex%5D%2Ctiles%5BrandomMove%5D%5D%7Dmoves%3D0%3Bdocument.getElementById(%22moves%22).textContent%3Dmoves%3BcreatePuzzle()%7DcreatePuzzle()%3Bshuffle()%3C/script%3E%3C/body%3E%3C/html%3E';
                url = game;
                title = '🧩 数字拼图';
            } else if (type === 'github') {
                url = 'https://github.com/Jasper-lee0320/gamesforbb';
                title = '📂 GitHub仓库';
            }

            gameLink = url;
            document.getElementById('linkArea').value = url;
            showQR(url, title);
            showMessage(title + ' 二维码生成成功！', 'success');
        }

        function showQR(url, title) {
            const qr1 = 'https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=' + encodeURIComponent(url);
            const qr2 = 'https://chart.googleapis.com/chart?chs=200x200&cht=qr&chl=' + encodeURIComponent(url);
            
            document.getElementById('qrArea').innerHTML = 
                '<h4>📱 ' + title + '</h4>' +
                '<img src="' + qr1 + '" onerror="this.src=\'' + qr2 + '\'" alt="QR Code">' +
                '<p style="color: #666; font-size: 12px; margin-top: 10px;">扫描二维码在手机上体验</p>';
        }

        function copyLink() {
            if (!gameLink) {
                showMessage('请先选择一个游戏！', 'error');
                return;
            }
            
            document.getElementById('linkArea').select();
            document.execCommand('copy');
            showMessage('链接已复制到剪贴板！', 'success');
        }

        function testGame() {
            if (!gameLink) {
                showMessage('请先选择一个游戏！', 'error');
                return;
            }
            
            const win = window.open('', '_blank');
            if (gameLink.startsWith('data:')) {
                win.document.write(decodeURIComponent(gameLink.replace('data:text/html;charset=utf-8,', '')));
                win.document.close();
            } else {
                win.location.href = gameLink;
            }
            showMessage('游戏已在新窗口打开！', 'success');
        }

        function showMessage(text, type) {
            const msg = document.getElementById('message');
            msg.textContent = text;
            msg.style.display = 'block';
            msg.style.color = type === 'success' ? 'green' : 'red';
            setTimeout(() => msg.style.display = 'none', 3000);
        }

        // 页面加载时自动生成飞机游戏
        window.onload = () => {
            setTimeout(() => makeQR('plane'), 500);
        };
    </script>
</body>
</html>
