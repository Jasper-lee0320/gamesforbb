<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jasper的游戏二维码生成器 - 真实可玩版</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: Arial, sans-serif;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            text-align: center;
            max-width: 500px;
            width: 100%;
        }

        h1 {
            color: #333;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .user-badge {
            background: linear-gradient(45deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            margin-bottom: 20px;
            display: inline-block;
        }

        .game-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin: 20px 0;
        }

        .game-card {
            background: linear-gradient(45deg, #ff6b6b, #ffa500);
            color: white;
            padding: 20px;
            border-radius: 15px;
            cursor: pointer;
            transition: transform 0.3s;
            border: none;
            font-size: 14px;
        }

        .game-card:hover {
            transform: translateY(-5px);
        }

        .game-card h3 {
            margin-bottom: 8px;
        }

        #qrContainer {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            min-height: 280px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        #qrContainer img {
            max-width: 200px;
            margin: 10px;
            border: 2px solid #667eea;
            border-radius: 10px;
        }

        .input-group {
            margin: 15px 0;
            text-align: left;
        }

        label {
            display: block;
            color: #333;
            font-weight: bold;
            margin-bottom: 5px;
        }

        textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 12px;
            height: 80px;
        }

        button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            margin: 10px 5px;
            font-size: 14px;
            transition: transform 0.3s;
        }

        button:hover {
            transform: translateY(-2px);
        }

        .status {
            margin: 15px 0;
            padding: 10px;
            border-radius: 8px;
            display: none;
        }

        .status.success {
            background: #d4edda;
            color: #155724;
        }

        .status.error {
            background: #f8d7da;
            color: #721c24;
        }

        .qr-info {
            color: #666;
            font-size: 12px;
            margin-top: 10px;
        }

        .warning {
            background: #fff3cd;
            color: #856404;
            padding: 10px;
            border-radius: 8px;
            margin: 15px 0;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🎮 专属游戏二维码生成器</h1>
        <div class="user-badge">🎯 您好，Jasper-lee0320!</div>
        
        <div class="warning">
            <strong>📱 使用说明：</strong><br>
            • 二维码会生成可直接在手机上玩的游戏<br>
            • 扫码后游戏会在手机浏览器中直接运行<br>
            • 无需下载或安装任何应用
        </div>

        <p style="color: #666; margin-bottom: 20px;">选择一个游戏生成可玩的二维码:</p>

        <div class="game-grid">
            <button class="game-card" onclick="generateGameQR('plane')">
                <h3>🚀 飞机大战</h3>
                <p>经典射击游戏<br>触屏控制飞机</p>
            </button>
            <button class="game-card" onclick="generateGameQR('snake')">
                <h3>🐍 贪吃蛇</h3>
                <p>经典贪吃蛇游戏<br>滑动控制方向</p>
            </button>
            <button class="game-card" onclick="generateGameQR('puzzle')">
                <h3>🧩 数字拼图</h3>
                <p>益智拼图游戏<br>考验逻辑思维</p>
            </button>
            <button class="game-card" onclick="generateGameQR('memory')">
                <h3>🧠 记忆翻牌</h3>
                <p>记忆力游戏<br>找出相同图案</p>
            </button>
        </div>

        <div id="qrContainer">
            <p style="color: #666;">📱 扫描二维码直接玩游戏</p>
            <p style="color: #999; font-size: 12px;">请选择上方游戏生成二维码</p>
        </div>

        <div class="input-group">
            <label>🔗 游戏数据链接 (完整游戏代码):</label>
            <textarea id="gameLink" readonly placeholder="选择游戏后，这里会显示完整的游戏代码链接..."></textarea>
        </div>

        <button onclick="copyLink()">📋 复制游戏链接</button>
        <button onclick="testGame()">🎮 测试游戏</button>
        <button onclick="generateGitHubQR()">📂 GitHub仓库二维码</button>

        <div class="status" id="status"></div>
    </div>

    <script>
        // 完整的游戏HTML代码 - 可以直接在浏览器中运行
        const games = {
            plane: {
                name: '🚀 Jasper的飞机大战',
                html: `<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jasper飞机大战</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            background: #001;
            font-family: Arial, sans-serif;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            touch-action: none;
        }
        canvas {
            border: 2px solid #0ff;
            background: linear-gradient(to bottom, #001, #003);
            touch-action: none;
        }
        #ui {
            color: #0ff;
            padding: 10px;
            text-align: center;
            font-size: 14px;
        }
        #gameOver {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            color: #0ff;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            z-index: 1000;
        }
        button {
            background: #0ff;
            color: #001;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            margin: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="ui">
        <div>🚀 Jasper-lee0320 的飞机大战</div>
        <div>分数: <span id="score">0</span> | 生命: <span id="lives">3</span></div>
    </div>
    <canvas id="game" width="300" height="400"></canvas>
    <div id="ui">
        <div style="font-size: 12px;">触屏拖动控制飞机，抬起手指发射子弹</div>
    </div>
    
    <div id="gameOver">
        <h3>游戏结束!</h3>
        <p>Jasper的最终分数: <span id="finalScore">0</span></p>
        <button onclick="location.reload()">重新开始</button>
    </div>

    <script>
        const canvas = document.getElementById('game');
        const ctx = canvas.getContext('2d');
        let gameRunning = true;
        let score = 0;
        let lives = 3;
        let frame = 0;

        const player = {
            x: 150,
            y: 350,
            width: 20,
            height: 30,
            speed: 5
        };

        let bullets = [];
        let enemies = [];
        let explosions = [];

        function drawPlayer() {
            ctx.fillStyle = '#0ff';
            ctx.fillRect(player.x - player.width/2, player.y - player.height/2, player.width, player.height);
            
            // 绘制玩家名字
            ctx.fillStyle = '#0ff';
            ctx.font = '10px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Jasper', player.x, player.y + 20);
        }

        function drawBullets() {
            ctx.fillStyle = '#ff0';
            bullets.forEach(bullet => {
                ctx.fillRect(bullet.x - 1, bullet.y, 3, 8);
            });
        }

        function drawEnemies() {
            ctx.fillStyle = '#f44';
            enemies.forEach(enemy => {
                ctx.fillRect(enemy.x, enemy.y, enemy.width, enemy.height);
            });
        }

        function drawExplosions() {
            explosions.forEach(explosion => {
                ctx.fillStyle = \`rgba(255, \${explosion.life * 255 | 0}, 0, \${explosion.life})\`;
                ctx.fillRect(
                    explosion.x - explosion.size/2, 
                    explosion.y - explosion.size/2, 
                    explosion.size, 
                    explosion.size
                );
            });
        }

        function updateBullets() {
            bullets = bullets.filter(bullet => {
                bullet.y -= 6;
                return bullet.y > 0;
            });
        }

        function updateEnemies() {
            enemies = enemies.filter(enemy => {
                enemy.y += enemy.speed;
                return enemy.y < canvas.height;
            });

            // 生成新敌人
            if (frame % 60 === 0) {
                enemies.push({
                    x: Math.random() * (canvas.width - 15),
                    y: 0,
                    width: 15,
                    height: 20,
                    speed: 2 + Math.random() * 2
                });
            }
        }

        function updateExplosions() {
            explosions = explosions.filter(explosion => {
                explosion.life -= 0.05;
                explosion.size++;
                return explosion.life > 0;
            });
        }

        function checkCollisions() {
            // 子弹击中敌人
            bullets.forEach((bullet, bulletIndex) => {
                enemies.forEach((enemy, enemyIndex) => {
                    if (bullet.x > enemy.x && 
                        bullet.x < enemy.x + enemy.width && 
                        bullet.y > enemy.y && 
                        bullet.y < enemy.y + enemy.height) {
                        
                        // 创建爆炸效果
                        explosions.push({
                            x: enemy.x + enemy.width/2,
                            y: enemy.y + enemy.height/2,
                            size: 8,
                            life: 1
                        });

                        bullets.splice(bulletIndex, 1);
                        enemies.splice(enemyIndex, 1);
                        score += 10;
                        document.getElementById('score').textContent = score;
                    }
                });
            });

            // 敌人撞击玩家
            enemies.forEach((enemy, enemyIndex) => {
                if (enemy.x < player.x + player.width/2 && 
                    enemy.x + enemy.width > player.x - player.width/2 && 
                    enemy.y < player.y + player.height/2 && 
                    enemy.y + enemy.height > player.y - player.height/2) {
                    
                    // 创建爆炸效果
                    explosions.push({
                        x: player.x,
                        y: player.y,
                        size: 15,
                        life: 1
                    });

                    enemies.splice(enemyIndex, 1);
                    lives--;
                    document.getElementById('lives').textContent = lives;

                    if (lives <= 0) {
                        gameOver();
                    }
                }
            });
        }

        function gameOver() {
            gameRunning = false;
            document.getElementById('finalScore').textContent = score;
            document.getElementById('gameOver').style.display = 'block';
        }

        function gameLoop() {
            if (!gameRunning) return;

            // 清空画布
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // 更新游戏状态
            updateBullets();
            updateEnemies();
            updateExplosions();
            checkCollisions();

            // 绘制游戏元素
            drawPlayer();
            drawBullets();
            drawEnemies();
            drawExplosions();

            frame++;
            requestAnimationFrame(gameLoop);
        }

        // 触屏控制
        let touchStartX = 0, touchStartY = 0;
        let isDragging = false;

        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            const touch = e.touches[0];
            const rect = canvas.getBoundingClientRect();
            touchStartX = touch.clientX - rect.left;
            touchStartY = touch.clientY - rect.top;
            isDragging = true;
        });

        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            if (!isDragging) return;
            
            const touch = e.touches[0];
            const rect = canvas.getBoundingClientRect();
            const touchX = touch.clientX - rect.left;
            const touchY = touch.clientY - rect.top;
            
            // 移动玩家
            player.x += (touchX - touchStartX) * 0.8;
            player.y += (touchY - touchStartY) * 0.5;
            
            // 限制玩家在画布内
            player.x = Math.max(player.width/2, Math.min(canvas.width - player.width/2, player.x));
            player.y = Math.max(player.height/2, Math.min(canvas.height - player.height/2, player.y));
            
            touchStartX = touchX;
            touchStartY = touchY;
        });

        canvas.addEventListener('touchend', (e) => {
            e.preventDefault();
            if (isDragging) {
                // 发射子弹
                bullets.push({
                    x: player.x,
                    y: player.y - player.height/2
                });
            }
            isDragging = false;
        });

        // 键盘控制（用于电脑测试）
        const keys = {};
        document.addEventListener('keydown', (e) => {
            keys[e.code] = true;
            if (e.code === 'Space') {
                e.preventDefault();
                bullets.push({
                    x: player.x,
                    y: player.y - player.height/2
                });
            }
        });

        document.addEventListener('keyup', (e) => {
            keys[e.code] = false;
        });

        function handleKeyboardMovement() {
            if (keys.ArrowLeft || keys.KeyA) {
                player.x -= player.speed;
            }
            if (keys.ArrowRight || keys.KeyD) {
                player.x += player.speed;
            }
            if (keys.ArrowUp || keys.KeyW) {
                player.y -= player.speed;
            }
            if (keys.ArrowDown || keys.KeyS) {
                player.y += player.speed;
            }
            
            // 限制玩家在画布内
            player.x = Math.max(player.width/2, Math.min(canvas.width - player.width/2, player.x));
            player.y = Math.max(player.height/2, Math.min(canvas.height - player.height/2, player.y));
        }

        // 修改游戏循环以包含键盘移动
        function gameLoop() {
            if (!gameRunning) return;

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            handleKeyboardMovement();
            updateBullets();
            updateEnemies();
            updateExplosions();
            checkCollisions();

            drawPlayer();
            drawBullets();
            drawEnemies();
            drawExplosions();

            frame++;
            requestAnimationFrame(gameLoop);
        }

        // 开始游戏
        gameLoop();
    <\/script>
</body>
</html>`
            },
            snake: {
                name: '🐍 Jasper的贪吃蛇',
                html: `<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jasper贪吃蛇</title>
    <style>
        body {
            background: #000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
            touch-action: none;
        }
        canvas {
            border: 2px solid #0f0;
            touch-action: none;
        }
        #info {
            color: #0f0;
            text-align: center;
            margin: 10px;
            font-size: 18px;
        }
        #controls {
            color: #888;
            font-size: 12px;
            text-align: center;
            margin: 10px;
        }
        #gameOver {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            color: #0f0;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            z-index: 1000;
        }
        button {
            background: #0f0;
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            margin: 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="info">
        🐍 Jasper-lee0320 的贪吃蛇<br>
        分数: <span id="score">0</span>
    </div>
    <canvas id="game" width="320" height="320"></canvas>
    <div id="controls">滑动屏幕控制蛇的方向</div>
    
    <div id="gameOver">
        <h3>游戏结束!</h3>
        <p>Jasper的最终分数: <span id="finalScore">0</span></p>
        <button onclick="location.reload()">重新开始</button>
    </div>

    <script>
        const canvas = document.getElementById('game');
        const ctx = canvas.getContext('2d');
        const box = 20;

        let snake = [{x: 8 * box, y: 8 * box}];
        let direction = '';
        let food = {
            x: Math.floor(Math.random() * 16) * box,
            y: Math.floor(Math.random() * 16) * box
        };
        let score = 0;

        function collision(head, array) {
            return array.some(segment => 
                head.x === segment.x && head.y === segment.y
            );
        }

        function draw() {
            // 绘制背景
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // 绘制蛇
            snake.forEach((segment, index) => {
                ctx.fillStyle = index === 0 ? '#0f0' : '#090';
                ctx.fillRect(segment.x, segment.y, box, box);
            });

            // 绘制食物
            ctx.fillStyle = '#f00';
            ctx.fillRect(food.x, food.y, box, box);

            // 计算蛇头的新位置
            let snakeX = snake[0].x;
            let snakeY = snake[0].y;

            if (direction === 'LEFT') snakeX -= box;
            if (direction === 'UP') snakeY -= box;
            if (direction === 'RIGHT') snakeX += box;
            if (direction === 'DOWN') snakeY += box;

            // 检查是否吃到食物
            if (snakeX === food.x && snakeY === food.y) {
                score++;
                document.getElementById('score').textContent = score;
                food = {
                    x: Math.floor(Math.random() * 16) * box,
                    y: Math.floor(Math.random() * 16) * box
                };
            } else {
                snake.pop();
            }

            // 检查游戏结束条件
            if (snakeX < 0 || snakeY < 0 || 
                snakeX >= canvas.width || snakeY >= canvas.height || 
                collision({x: snakeX, y: snakeY}, snake)) {
                
                document.getElementById('finalScore').textContent = score;
                document.getElementById('gameOver').style.display = 'block';
                return;
            }

            snake.unshift({x: snakeX, y: snakeY});
        }

        // 键盘控制
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft' && direction !== 'RIGHT') direction = 'LEFT';
            if (e.key === 'ArrowUp' && direction !== 'DOWN') direction = 'UP';
            if (e.key === 'ArrowRight' && direction !== 'LEFT') direction = 'RIGHT';
            if (e.key === 'ArrowDown' && direction !== 'UP') direction = 'DOWN';
        });

        // 触屏控制
        let touchStartX, touchStartY;

        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            const touch = e.touches[0];
            touchStartX = touch.clientX;
            touchStartY = touch.clientY;
        });

        canvas.addEventListener('touchend', (e) => {
            e.preventDefault();
            const touch = e.changedTouches[0];
            const touchEndX = touch.clientX;
            const touchEndY = touch.clientY;
            
            const dx = touchEndX - touchStartX;
            const dy = touchEndY - touchStartY;
            
            // 判断滑动方向
            if (Math.abs(dx) > Math.abs(dy)) {
                // 水平滑动
                if (dx > 0 && direction !== 'LEFT') direction = 'RIGHT';
                if (dx < 0 && direction !== 'RIGHT') direction = 'LEFT';
            } else {
                // 垂直滑动
                if (dy > 0 && direction !== 'UP') direction = 'DOWN';
                if (dy < 0 && direction !== 'DOWN') direction = 'UP';
            }
        });

        setInterval(draw, 150);
    <\/script>
</body>
</html>`
            },
            puzzle: {
                name: '🧩 Jasper的数字拼图',
                html: `<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jasper拼图</title>
    <style>
        body {
            background: linear-gradient(45deg, #667eea, #764ba2);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            font-family: Arial, sans-serif;
            min-height: 100vh;
            touch-action: manipulation;
        }
        #game {
            background: #fff;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        #puzzle {
            display: grid;
            grid-template-columns: repeat(3, 70px);
            gap: 5px;
            margin: 20px 0;
            justify-content: center;
        }
        .tile {
            width: 70px;
            height: 70px;
            background: #667eea;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 8px;
            transition: all 0.3s;
            touch-action: manipulation;
        }
        .tile:hover, .tile:active {
            background: #764ba2;
            transform: scale(1.05);
        }
        .empty {
            background: transparent !important;
            cursor: default !important;
        }
        .empty:hover, .empty:active {
            transform: none !important;
        }
        #info {
            color: #fff;
            text-align: center;
            margin-bottom: 20px;
            font-size: 18px;
        }
        button {
            background: #fff;
            color: #667eea;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
        }
        button:hover, button:active {
            background: #f0f0f0;
            transform: translateY(-2px);
        }
        #winMessage {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            z-index: 1000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <div id="info">
        <h2>🧩 Jasper-lee0320 的拼图</h2>
        <p>步数: <span id="moves">0</span></p>
    </div>
    <div id="game">
        <div id="puzzle"></div>
        <button onclick="shuffle()">重新开始</button>
        <button onclick="solve()">显示答案</button>
    </div>
    
    <div id="winMessage">
        <h3>🎉 恭喜完成!</h3>
        <p>Jasper用了 <span id="finalMoves">0</span> 步完成拼图!</p>
        <button onclick="document.getElementById('winMessage').style.display='none'; shuffle();">再来一局</button>
    </div>

    <script>
        let tiles = [1, 2, 3, 4, 5, 6, 7, 8, 0];
        let moves = 0;

        function createPuzzle() {
            const puzzle = document.getElementById('puzzle');
            puzzle.innerHTML = '';
            
            tiles.forEach((tile, index) => {
                const div = document.createElement('div');
                div.className = tile === 0 ? 'tile empty' : 'tile';
                div.textContent = tile === 0 ? '' : tile;
                div.onclick = () => moveTile(index);
                puzzle.appendChild(div);
            });
        }

        function moveTile(index) {
            const emptyIndex = tiles.indexOf(0);
            const row = Math.floor(index / 3);
            const col = index % 3;
            const emptyRow = Math.floor(emptyIndex / 3);
            const emptyCol = emptyIndex % 3;

            // 检查是否可以移动
            if ((Math.abs(row - emptyRow) === 1 && col === emptyCol) ||
                (Math.abs(col - emptyCol) === 1 && row === emptyRow)) {
                
                [tiles[index], tiles[emptyIndex]] = [tiles[emptyIndex], tiles[index]];
                moves++;
                document.getElementById('moves').textContent = moves;
                createPuzzle();
                checkWin();
            }
        }

        function checkWin() {
            if (JSON.stringify(tiles) === '[1,2,3,4,5,6,7,8,0]') {
                document.getElementById('finalMoves').textContent = moves;
                document.getElementById('winMessage').style.display = 'block';
            }
        }

        function shuffle() {
            // 通过合法移动来打乱，确保有解
            for (let i = 0; i < 200; i++) {
                const validMoves = [];
                const emptyIndex = tiles.indexOf(0);
                const row = Math.floor(emptyIndex / 3);
                const col = emptyIndex % 3;

                if (row > 0) validMoves.push(emptyIndex - 3);
                if (row < 2) validMoves.push(emptyIndex + 3);
                if (col > 0) validMoves.push(emptyIndex - 1);
                if (col < 2) validMoves.push(emptyIndex + 1);

                const randomMove = validMoves[Math.floor(Math.random() * validMoves.length)];
                [tiles[randomMove], tiles[emptyIndex]] = [tiles[emptyIndex], tiles[randomMove]];
            }
            
            moves = 0;
            document.getElementById('moves').textContent = moves;
            createPuzzle();
        }

        function solve() {
            tiles = [1, 2, 3, 4, 5, 6, 7, 8, 0];
            moves = 0;
            document.getElementById('moves').textContent = moves;
            createPuzzle();
        }

        createPuzzle();
        shuffle();
    <\/script>
</body>
</html>`
            },
            memory: {
                name: '🧠 Jasper的记忆游戏',
                html: `<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jasper记忆游戏</title>
    <style>
        body {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            font-family: Arial, sans-serif;
            min-height: 100vh;
            touch-action: manipulation;
        }
        #game {
            background: #fff;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        #board {
            display: grid;
            grid-template-columns: repeat(4, 70px);
            gap: 10px;
            margin: 20px 0;
            justify-content: center;
        }
        .card {
            width: 70px;
            height: 70px;
            background: #ddd;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            transition: all 0.3s;
            touch-action: manipulation;
        }
        .card:hover, .card:active {
            transform: scale(1.05);
        }
        .card.flipped {
            background: #4ecdc4;
            color: #fff;
        }
        .card.matched {
            background: #6c5ce7;
            color: #fff;
        }
        #info {
            color: #fff;
            text-align: center;
            margin-bottom: 20px;
            font-size: 18px;
        }
        button {
            background: #fff;
            color: #ff6b6b;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            margin: 5px;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s;
        }
        button:hover, button:active {
            background: #f0f0f0;
            transform: translateY(-2px);
        }
        #winMessage {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            z-index: 1000;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <div id="info">
        <h2>🧠 Jasper-lee0320 的记忆游戏</h2>
        <p>翻牌: <span id="flips">0</span> | 配对: <span id="pairs">0</span>/8</p>
    </div>
    <div id="game">
        <div id="board"></div>
        <button onclick="newGame()">新游戏</button>
    </div>
    
    <div id="winMessage">
        <h3>🎉 恭喜完成!</h3>
        <p>Jasper用了 <span id="finalFlips">0</span> 次翻牌完成游戏!</p>
        <button onclick="document.getElementById('winMessage').style.display='none'; newGame();">再来一局</button>
    </div>

    <script>
        const symbols = ['🚀', '🎮', '🎯', '🏆', '💎', '🌟', '🎨', '🎪'];
        const cards = [...symbols, ...symbols];
        let flippedCards = [];
        let flips = 0;
        let pairs = 0;
        let canFlip = true;

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function createBoard() {
            const board = document.getElementById('board');
            board.innerHTML = '';
            shuffle(cards);
            
            cards.forEach((symbol, index) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.dataset.symbol = symbol;
                card.dataset.index = index;
                card.onclick = () => flipCard(card);
                board.appendChild(card);
            });
        }

        function flipCard(card) {
            if (!canFlip || 
                card.classList.contains('flipped') || 
                card.classList.contains('matched')) {
                return;
            }

            card.classList.add('flipped');
            card.textContent = card.dataset.symbol;
            flippedCards.push(card);
            
            flips++;
            document.getElementById('flips').textContent = flips;

            if (flippedCards.length === 2) {
                canFlip = false;
                setTimeout(checkMatch, 1000);
            }
        }

        function checkMatch() {
            const [card1, card2] = flippedCards;
            
            if (card1.dataset.symbol === card2.dataset.symbol) {
                card1.classList.add('matched');
                card2.classList.add('matched');
                pairs++;
                document.getElementById('pairs').textContent = pairs;
                
                if (pairs === 8) {
                    document.getElementById('finalFlips').textContent = flips;
                    document.getElementById('winMessage').style.display = 'block';
                }
            } else {
                card1.classList.remove('flipped');
                card2.classList.remove('flipped');
                card1.textContent = '';
                card2.textContent = '';
            }
            
            flippedCards = [];
            canFlip = true;
        }

        function newGame() {
            flippedCards = [];
            flips = 0;
            pairs = 0;
            canFlip = true;
            
            document.getElementById('flips').textContent = 0;
            document.getElementById('pairs').textContent = 0;
            
            createBoard();
        }

        newGame();
    <\/script>
</body>
</html>`
            }
        };

        let currentGameLink = '';

        function generateGameQR(gameType) {
            const game = games[gameType];
            if (!game) return;

            // 创建完整的data URL
            const gameHTML = game.html;
            const encodedHTML = encodeURIComponent(gameHTML);
            currentGameLink = 'data:text/html;charset=utf-8,' + encodedHTML;

            // 更新链接显示区域
            document.getElementById('gameLink').value = currentGameLink;

            // 生成二维码
            generateQRImage(currentGameLink, game.name);
            showStatus(\`\${game.name} 的可玩二维码生成成功！\`, 'success');
        }

        function generateGitHubQR() {
            const githubUrl = 'https://github.com/Jasper-lee0320/gamesforbb';
            currentGameLink = githubUrl;
            document.getElementById('gameLink').value = githubUrl;
            generateQRImage(githubUrl, '📂 GitHub仓库');
            showStatus('GitHub仓库二维码生成成功！', 'success');
        }

        function generateQRImage(content, title) {
            const qrContainer = document.getElementById('qrContainer');
            
            // 使用多个API作为备选
            const apis = [
                \`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=\${encodeURIComponent(content)}\`,
                \`https://chart.googleapis.com/chart?chs=200x200&cht=qr&chl=\${encodeURIComponent(content)}\`
            ];

            qrContainer.innerHTML = \`
                <h4>📱 \${title}</h4>
                <div style="margin: 10px;">
                    <img src="\${apis[0]}" 
                         alt="QR Code" 
                         onerror="this.src='\${apis[1]}'; this.onerror=null;" 
                         style="max-width: 200px; border: 2px solid #667eea; border-radius: 10px;">
                </div>
                <div class="qr-info">
                    <p>📱 扫描二维码在手机上直接玩游戏</p>
                    <p style="margin-top: 5px;">🎮 无需下载，直接运行</p>
                </div>
            \`;
        }

        function copyLink() {
            if (!currentGameLink) {
                showStatus('请先选择一个游戏！', 'error');
                return;
            }

            const textarea = document.getElementById('gameLink');
            textarea.select();
            textarea.setSelectionRange(0, 99999);

            try {
                navigator.clipboard.writeText(currentGameLink).then(() => {
                    showStatus('游戏链接已复制！可以发送给朋友了', 'success');
                }).catch(() => {
                    document.execCommand('copy');
                    showStatus('游戏链接已复制！可以发送给朋友了', 'success');
                });
            } catch (err) {
                showStatus('复制失败，请手动复制链接', 'error');
            }
        }

        function testGame() {
            if (!currentGameLink) {
                showStatus('请先选择一个游戏！', 'error');
                return;
            }

            const newWindow = window.open('', '_blank');
            if (newWindow) {
                if (currentGameLink.startsWith('data:text/html')) {
                    newWindow.document.write(decodeURIComponent(currentGameLink.replace('data:text/html;charset=utf-8,', '')));
                    newWindow.document.close();
                } else {
                    newWindow.location.href = currentGameLink;
                }
                showStatus('游戏已在新窗口打开，可以测试玩法！', 'success');
            } else {
                showStatus('请允许弹窗或使用复制链接功能', 'error');
            }
        }

        function showStatus(message, type) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = \`status \${type}\`;
            status.style.display = 'block';

            setTimeout(() => {
                status.style.display = 'none';
            }, 4000);
        }

        // 页面加载时自动生成飞机大战游戏的二维码作为示例
        window.onload = function() {
            setTimeout(() => {
                generateGameQR('plane');
            }, 1000);
        };
    </script>
</body>
</html>
